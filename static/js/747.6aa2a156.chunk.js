"use strict";(self.webpackChunkcra_deploy=self.webpackChunkcra_deploy||[]).push([[747,668],{9747:function(n,t,e){e.r(t),e.d(t,{default:function(){return b}});var r=e(32),u=e(4402),s=e(657),o=e(8668),i=e(5671),c=e(3144),a=e(7757),d=e.n(a),h=e(4098),l=e(1413),f=e(5987),v=e(4569),p=["channel","method"],C={NODE_ENV:"production",PUBLIC_URL:"https://qinghuani.github.io/cra-deploy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MOCK,k=e.n(v)().create({baseURL:"local"===C?"http://localhost:3000":"",timeout:5e3});k.interceptors.response.use((function(n){if(200===(null===n||void 0===n?void 0:n.status)||304===(null===n||void 0===n?void 0:n.status))return n.data}));var m=function(n){var t=n.channel,e=n.method,r=void 0===e?"GET":e,u=(0,f.Z)(n,p);return k.request((0,l.Z)({url:t,method:r},u))},x=new(function(){function n(){var t=this;(0,i.Z)(this,n),this.num=1,this.users=[],this.setCount=function(){t.num++},this.reset=function(){t.num=1},this.addUser=function(){t.users=t.users.concat({name:"qin"})},(0,h.ky)(this)}return(0,c.Z)(n,[{key:"userCount",get:function(){return this.users.length}},{key:"getUsers",value:d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m({channel:"/users"});case 3:this.users=n.sent,n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.error("fetch users error",n.t0);case 9:case"end":return n.stop()}}),n,this,[[0,6]])}))}]),n}()),_=e(6871),j=e(184);function b(){var n=(0,o.useCount)(),t=n.count,e=n.add,i=(0,_.s0)(),c=(0,r.fv)((function(){return x})),a=function(){e()};return(0,u.Z)((function(){c.getUsers()})),(0,s.Z)((function(){c.reset()})),(0,j.jsx)(r.Qj,{children:function(){return(0,j.jsxs)("div",{children:[(0,j.jsx)("h2",{children:"this is Page1 component!"}),(0,j.jsxs)("p",{children:["data from store: ",c.num]}),t,(0,j.jsx)("button",{onClick:a,children:"click"}),(0,j.jsx)("button",{onClick:c.setCount,children:"change name"}),(0,j.jsx)("button",{onClick:c.addUser,children:"Add user"}),(0,j.jsxs)("p",{children:["user \u603b\u4eba\u6570\uff1a",c.userCount]}),(0,j.jsx)("ul",{children:c.users.map((function(n,t){var e=n.name;return(0,j.jsx)("li",{children:e},t)}))}),(0,j.jsx)("button",{onClick:function(){i("/page2")},children:"to page2"})]})}})}},8668:function(n,t,e){e.r(t),e.d(t,{useCount:function(){return s}});var r=e(8152),u=e(2791);function s(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(0,u.useState)(n),e=(0,r.Z)(t,2),s=e[0],o=e[1],i=(0,u.useCallback)((function(){o((function(n){return n+1}))}),[]),c=(0,u.useCallback)((function(){o(n)}),[n]);return{count:s,add:i,reset:c}}}}]);
//# sourceMappingURL=747.6aa2a156.chunk.js.map